/* Builds dashboard (TV/wall-monitor) mode â€” information-dense, non-interactive */

/* ===== Base styles for TV page classes (no longer in builds.css) ===== */
.build-cards {
    display: grid;
    gap: 8px;
}

.build-card {
    background: var(--card-bg);
    border-radius: 8px;
    padding: 20px;
    box-shadow: var(--shadow);
    border: var(--card-border);
}

.card-header {
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: var(--divider);
}

.repo-name {
    font-size: 16px;
    font-weight: 600;
    margin: 0;
    color: var(--primary-text);
}

.branch-section {
    margin-bottom: 4px;
}

.branch-section:last-child {
    margin-bottom: 0;
}

.branch-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.branch-name {
    font-weight: 500;
    color: var(--secondary-text);
    text-transform: uppercase;
    font-size: 11px;
    letter-spacing: 0.5px;
}

.no-runs {
    color: var(--muted-text);
    font-style: italic;
    font-size: 12px;
}

/* ===== TV mode layout ===== */
html.tv-mode {
    overflow: hidden;
}

html.tv-mode body {
    margin: 0;
    padding: 0;
    height: 100vh;
}

/* ===== Container and status bar ===== */
.tv-container {
    height: 100vh;
    display: flex;
    flex-direction: column;
    padding: 4px 12px;
    box-sizing: border-box;
}

.tv-status-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 2px 0;
    font-size: 13px;
    color: var(--secondary-text);
    flex-shrink: 0;
    border-bottom: 1px solid var(--border-color);
    margin-bottom: 6px;
}

.tv-status-right {
    display: flex;
    gap: 24px;
    align-items: center;
}

.tv-main {
    flex: 1;
    overflow: hidden;
    min-height: 0;
}

/* ===== Viewport-adaptive grid (cols/rows set by JS via custom properties) ===== */
html.tv-mode .build-cards {
    display: grid;
    grid-template-columns: repeat(var(--tv-cols, 4), 1fr);
    grid-template-rows: repeat(var(--tv-rows, 3), 1fr);
    gap: 8px;
    margin-top: 0;
    height: 100%;
    align-content: stretch;
}

/* ===== Card chrome: tight padding, overflow contained ===== */
html.tv-mode .build-card {
    padding: 6px 10px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

html.tv-mode .card-header {
    margin-bottom: 4px;
    padding-bottom: 3px;
    border-bottom: 1px solid var(--border-color);
}

html.tv-mode .repo-name {
    font-size: clamp(11px, 1.2vw, 18px);
    line-height: 1.2;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* ===== Branch sections ===== */
html.tv-mode .branch-section {
    margin-bottom: 4px;
    padding-left: 8px;
}

html.tv-mode .branch-section:last-child {
    margin-bottom: 0;
}

html.tv-mode .branch-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0;
    min-height: 18px;
}

html.tv-mode .branch-name {
    font-size: clamp(8px, 0.8vw, 12px);
}

/* Branch distinction via left border */
html.tv-mode .branch-main {
    border-left: 3px solid var(--interactive-color);
}

html.tv-mode .branch-develop {
    border-left: 3px solid var(--accent-color);
}

/* ===== Summary pills and counts ===== */
.branch-summary {
    display: flex;
    gap: 8px;
    align-items: center;
}

.summary-pill {
    font-size: clamp(8px, 0.8vw, 12px);
    font-weight: 600;
    padding: 1px 8px;
    border-radius: 8px;
    line-height: 1.4;
}

.pill-success {
    background: var(--success-color);
    color: #fff;
}

.summary-count {
    font-size: clamp(8px, 0.8vw, 12px);
    font-weight: 600;
}

.count-success { color: var(--success-color); }
.count-failure { color: var(--error-color); }
.count-running { color: var(--warning-color); }

/* ===== Failure and running lists ===== */
.failure-list,
.running-list {
    list-style: none;
    margin: 2px 0 0 0;
    padding: 0;
    display: flex;
    flex-wrap: wrap;
    gap: 3px;
}

.failure-item,
.running-item {
    display: flex;
    align-items: center;
    gap: 3px;
    font-size: clamp(7px, 0.7vw, 11px);
    padding: 1px 6px;
    border-radius: 3px;
    line-height: 1.3;
    max-width: 100%;
}

.failure-item {
    background: color-mix(in srgb, var(--error-color) 15%, transparent);
    color: var(--error-color);
}

.running-item {
    background: color-mix(in srgb, var(--warning-color) 12%, transparent);
    color: var(--warning-color);
}

.failure-indicator,
.running-indicator {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    flex-shrink: 0;
}

.failure-indicator { background: var(--error-color); }
.running-indicator { background: var(--warning-color); }

.failure-name,
.running-name {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* ===== Card-level failure emphasis ===== */
html.tv-mode .build-card:has(.has-failures) {
    border-left: 3px solid var(--error-color);
    box-shadow: 0 0 8px color-mix(in srgb, var(--error-color) 30%, transparent);
}

/* ===== Compact no-data state ===== */
html.tv-mode .no-runs {
    font-size: 10px;
    padding: 0;
    color: var(--neutral-color);
    font-style: normal;
}

/* ===== Stable countdown number ===== */
.tv-countdown-num {
    display: inline-block;
    min-width: 2ch;
    text-align: right;
    font-variant-numeric: tabular-nums;
}

/* ===== Stale card ===== */
html.tv-mode .build-card.stale-card {
    opacity: 0.65;
    border-left: 3px solid var(--warning-color);
}

/* ===== Kill all hover/interactive states ===== */
html.tv-mode a { cursor: default; }
html.tv-mode a:hover { text-decoration: none; }
