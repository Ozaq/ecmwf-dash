{{define "base"}}<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECMWF GitHub Dashboard - {{template "title" .}}</title>
    <link rel="stylesheet" href="/static/base.css">
    {{template "extra-css" .}}
    <script>
        (function() {
            var css = localStorage.getItem('preferredCSS');
            if (css && /^[\w.-]+\.css$/.test(css)) {
                var link = document.createElement('link');
                link.rel = 'stylesheet';
                link.id = 'theme-link';
                link.href = '/static/' + css;
                document.head.appendChild(link);
            }
        })();
    </script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ECMWF GitHub Dashboard - {{template "title" .}}</h1>
            <nav class="nav-links">
                <a href="/builds" {{if eq .PageID "builds"}}class="active"{{end}}>Build Status</a>
                <a href="/pulls" {{if eq .PageID "pulls"}}class="active"{{end}}>Pull Requests</a>
                <a href="/issues" {{if eq .PageID "issues"}}class="active"{{end}}>Issues</a>
            </nav>
            <div class="header-info">
                {{template "stats" .}}
                <div class="css-selector">
                    <div>
                        <label for="refresh-select">Refresh</label>
                        <select id="refresh-select">
                            <option value="0">Off</option>
                            <option value="60000">1 min</option>
                            <option value="300000">5 min</option>
                            <option value="600000">10 min</option>
                            <option value="900000">15 min</option>
                        </select>
                    </div>
                    <div>
                        <label for="style-select">Theme</label>
                        <select id="style-select">
                            {{range .CSSFiles}}
                            <option value="{{.Value}}" {{if eq .Value $.CSSFile}}selected{{end}}>{{.DisplayName}}</option>
                            {{end}}
                        </select>
                    </div>
                </div>
            </div>
        </header>

        <main>
            {{template "content" .}}
        </main>

        <footer class="site-footer">
            <p>ECMWF GitHub Dashboard</p>
        </footer>
    </div>

    <script src="/static/dashboard.js"></script>
</body>
</html>{{end}}
